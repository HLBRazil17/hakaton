<table class="">
    <thead>
        <tr>
            <th>
                <span>
                    ID
                </span>
            </th>
            <th>
                <span class="material-symbols-outlined">
                    group
                </span>
                <span>
                    Nome
                </span>
            </th>
            <th>
                <span class="material-symbols-outlined">
                    mail
                </span>
                <span>
                    Email
                </span>
            </th>
            <th>
                <span class="material-symbols-outlined">
                    content_paste_search
                </span>
                <span>
                    Ra
                </span>
            </th>
            <th>
                <span class="material-symbols-outlined">
                    edit
                </span>
                <span>
                    Edição
                </span>
            </th>
        </tr>
    </thead>
    <tbody id="dadosAlunos">

    </tbody>
</table>
<script>
    function mostrarAviso(mensagem, tipo = 'info') {
        const mensagensAviso = document.querySelector('#mensagensAviso');
        mensagensAviso.innerHTML = `<div class="aviso ${tipo}">${mensagem}</div>`;
    }

    function mostrarAlunos(data) {
        const dadosAlunos = document.querySelector('#dadosAlunos');

        // Limpar div antes de inserir novos dados
        dadosAlunos.innerHTML = '';

        // Iterar sobre os dados e criar divs para cada aluno
        data.forEach(aluno => {
            const divAluno = document.createElement('tr');
            divAluno.classList.add('aluno');

            divAluno.innerHTML = `
                <td><span>${aluno.iduser}</span></td>
                <td><span>${aluno.nome}</span></td>
                <td><span>${aluno.email}</span></td>
                <td><span>${aluno.ra}</span></td>
                <td>
                    <a href="/detalheAluno?idUser=${aluno.iduser}">
                        <span class="material-symbols-outlined">
                        open_in_new
                        </span>
                    </a>
                </td>
            `;

            dadosAlunos.appendChild(divAluno);
        });
    }

    function getApiAluno() {
        // Fazer solicitação GET para obter dados do servidor PHP
        fetch('http://localhost:8080/api/v1/getAlunos.php', {
            method: 'GET',
            credentials: 'include'
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Erro na requisição');
                }
                return response.json();
            })
            .then(data => {
                mostrarAlunos(data); // Chamar função para mostrar os alunos na página
            })
            .catch(error => {
                console.error('Erro:', error);
                mostrarAviso('Erro ao carregar os dados dos alunos.', 'error');
            });
    }


    getApiAluno();

</script>